# Error Report Processing Script

This script is designed to process error reports generated by a system and take appropriate actions, including creating incidents in ServiceNow and sending email notifications.

This script is intended to be ran on each Core Server as error reports can be saved on any Core Server behind the EI FQDN (VIP) as a scheduled task. This can be configured to run at the interval of your choice, for example every 5 minutes.

You will need to work with your servicenow development team to get the correct tables, guids, and accounts for ticket creation.

If you wish to use the email functionality, you will need access to an SMTP server.

## Prerequisites

Before running the script, ensure the following:

- Python is installed on your system.
- Required Python packages are installed. You can install them using the following command:

```bash
pip install -r requirements.txt
  ```

## Configuration

The script uses a configuration file named `error-report-config.ini` to store various parameters. Ensure that this file is present in the same directory as the script. Example configuration parameters include:

- Agfa Variables
- Email Variables
- ServiceNow Variables
- Excluded Items Variables

## Usage

Run the script using the following command:

```bash
python error_report_script.py
```

The script will process error reports, create incidents in ServiceNow, and send email notifications based on the configuration.

## Script Logic

1. **Configuration Loading**: Load configuration parameters from the `error-report-config.ini` file.

2. **Business Hours Check**: Determine the urgency and impact based on business hours.

3. **Excluded Items Check**: Exclude certain items from processing based on predefined lists.

4. **Email Sending**: Send email notifications with error report details.

5. **ServiceNow Ticket Creation**: Create Tickets in ServiceNow with relevant details.

6. **Attachment Handling**: Attach the error report file to the created ServiceNow Ticket.

7. **Processing Loop**: The script processes each error report found in the source folder.

## Error Report Format

The script expects error reports to be in a specific format, including a zip file containing logs and a `comment.txt` file.

## Excluded Items

You can specify computer names and user codes to be excluded from ServiceNow processing in the `excluded_computer_names_path` and `excluded_user_codes_path` files, respectively.

## Support and Issues

For any issues or questions, please create an issue in the [GitHub repository](https://github.com/mrjmc99/agfa-ei-client-error-reports/).

